<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8" />
  <title>SciManager</title>
  <meta name="viewport"
    content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />

  <!-- 파비콘 -->
  <link rel="icon" type="image/x-icon" href="css/favicon.ico" />

  <!-- 구글 아이콘 폰트 -->
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />

  <!-- Supabase SDK -->
  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>

  <!-- Supabase Client 초기화 <script src="js/supabaseClient.js"></script> -->

  <!-- 초기 스플래시 최소 스타일 (CSS 로드 전에 플래시 방지) -->
  <style>
    html,
    body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
    }

    #splash-screen {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      width: 100%;
      height: 100vh;
      background-color: #fff;
      padding: 40px 20px;
      box-sizing: border-box;
    }

    #splash-screen .main-logo {
      width: 150px;
      height: auto;
      display: block;
      margin: 0 auto 5px auto;
    }

    #splash-screen h1,
    #splash-screen p {
      margin: 0;
    }
  </style>

  <!-- 화면 폭에 따라 하나의 CSS만 로드 -->
  <script>
    (function () {
      var isMobilePortrait = window.matchMedia('(max-width: 640px)').matches;
      var cssHref = isMobilePortrait ? 'css/styles_mobile.css?v=1' : 'css/styles.css?v=3';
      var link = document.createElement('link');
      link.rel = 'stylesheet';
      link.href = cssHref;
      document.head.appendChild(link);
    })();
  </script>

  <script>
    // GitHub Pages: (루트) vs (서브루트 /scimanager/) 모두 대응
    (function () {
      var guessed = location.pathname.includes('/scimanager/')
        ? '/scimanager/'
        : '/';

      window.APP_BASE_PATH = guessed.replace(/\/+$/, '/'); // 끝에 / 하나로 정리
    })();
  </script>

  <!-- 초기 진입 스크립트 -->
  <script src="js/index.js" defer></script>
</head>

<body class="home-active">
  <!-- 초기 스플래시(로딩) 화면 -->
  <div id="splash-screen">
    <img src="css/logo.png" alt="SciManager Logo" class="main-logo" width="150" height="150" />

    <!-- 앱이름: APP_CONFIG.APPNAME -->
    <h1 id="app-title" class="app-title">SciManager</h1>

    <!-- 앱버전: APP_CONFIG.VERSION -->
    <p id="app-version" class="app-version" style="display: none;"></p>

    <!-- 학교 이름: APP_CONFIG.SCHOOL -->
    <p id="school-name" class="school-name">로딩 중</p>
  </div>

  <!-- 메인 컨텐츠 -->
  <div id="form-container"></div>

  <!-- 하단 내비게이션 -->
  <div id="navbar-container"></div>

  <!-- 플로팅 액션 버튼 -->
  <button class="fab" id="fab-button" style="display: none;"></button>

  <!-- 카메라 모달 -->
  <div id="camera-modal" class="modal-overlay" style="display: none;">
    <div class="modal-content">
      <video id="camera-view" autoplay playsinline></video>
      <canvas id="photo-canvas" style="display: none;"></canvas>
      <div class="modal-controls">
        <button type="button" id="capture-btn">사진 찍기</button>
        <button type="button" id="cancel-camera-btn">취소하기</button>
      </div>
    </div>
  </div>
</body>

</html>