<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8" />
  <title>SciManager</title>
  <meta name="viewport"
    content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />

  <!-- 파비콘 -->
  <link rel="icon" type="image/x-icon" href="css/favicon.ico" />

  <!-- 구글 아이콘 폰트 -->
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />

  <!-- Supabase SDK -->
  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>



  <!-- CSS Files -->
  <link rel="stylesheet" href="css/styles.css?v=20251229">
  <link rel="stylesheet" href="css/styles_tablet.css?v=20251229" media="(min-width: 601px) and (max-width: 1024px)">
  <link rel="stylesheet" href="css/styles_mobile.css?v=20251229_v8" media="(max-width: 600px)">

  <script>
    // GitHub Pages: (루트) vs (서브루트 /repo-name/) 모두 대응
    (function () {
      // 1. 호스트가 github.io 인지 확인
      var isGithubPages = location.hostname.includes('github.io');
      
      // 2. 경로의 첫 번째 세그먼트 추출
      var firstSegment = location.pathname.split('/')[1]; 
      
      // 3. 결정: GitHub Pages이고 첫 세그먼트가 있다면 그것을 base로, 아니면 /
      var guessed = (isGithubPages && firstSegment) 
        ? '/' + firstSegment + '/' 
        : '/';

      window.APP_BASE_PATH = guessed;
    })();
  </script>

  <script src="data/subject-config.js"></script>
  <script src="data/safety-quiz-data.js"></script>

  <!-- 초기 진입 스크립트 -->
  <script src="js/index.js?v=2" defer></script>
</head>

<body class="home-active">
  <!-- 초기 스플래시(로딩) 화면 -->
  <div id="splash-screen">
    <img src="css/logo.png" alt="SciManager Logo" class="main-logo" width="150" height="150" />

    <!-- 앱이름: APP_CONFIG.APPNAME -->
    <h1 id="app-title" class="app-title">SciManager</h1>

    <!-- 앱버전: APP_CONFIG.VERSION -->
    <p id="app-version" class="app-version" style="display: none;"></p>

    <!-- 학교 이름: APP_CONFIG.SCHOOL -->
    <p id="school-name" class="school-name">로딩 중</p>

    <!-- 저작권 문구 -->
    <div class="copyright-notice">© 2025-2026 murmurgene. All rights reserved.</div>
  </div>

  <!-- 메인 컨텐츠 -->
  <div id="form-container"></div>

  <!-- 하단 내비게이션 -->
  <div id="navbar-container"></div>

  <!-- 플로팅 액션 버튼 -->
  <button class="fab" id="fab-button" style="display: none;"></button>

  <!-- 카메라 모달 -->
  <div id="camera-modal" class="modal-overlay" style="display: none;">
    <div class="modal-content camera-modal">
      <h3 class="modal-header">사진 촬영</h3>
      <div class="modal-body"
        style="padding: 0; display: flex; align-items: center; justify-content: center; background: #000;">
        <video id="camera-view" autoplay playsinline style="width: 100%; height: 100%; object-fit: contain;"></video>
        <canvas id="photo-canvas" style="display: none;"></canvas>
      </div>
      <div class="modal-footer" style="justify-content: center;">
        <button type="button" id="capture-btn" class="btn-primary">
          <span class="material-symbols-outlined" style="vertical-align: middle; margin-right: 5px;">camera</span> 촬영
        </button>
        <button type="button" id="cancel-camera-btn" class="btn-cancel">취소하기</button>
      </div>
    </div>
  </div>
</body>

<!-- SheetJS for Excel Export -->
<script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js"></script>
<!-- HTML2Canvas & JSPDF for Label Export -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<!-- Export Utility -->
<script src="js/utils/export.js"></script>

</html>