<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8" />
  <title>SciManager</title>
  <meta name="viewport"
    content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />

  <!-- 파비콘 -->
  <link rel="icon" type="image/x-icon" href="css/favicon.ico" />

  <!-- 구글 아이콘 폰트 -->
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />

  <!-- Supabase SDK -->
  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>

  <!-- 초기 스플래시 최소 스타일 (CSS 로드 전에 플래시 방지) -->
  <style>
    html,
    body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
    }

    #splash-screen {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      width: 100%;
      height: 100%;
      height: 100dvh;
      background-color: #fff;
      padding: 40px 20px 100px 20px;
      /* Large bottom padding for navbar height */
      box-sizing: border-box;
      position: relative;
    }

    /* Copyright Notice */
    .copyright-notice {
      position: absolute;
      bottom: 72px;
      /* 60px Navbar + 12px Gap */
      left: 15px;
      font-size: 11px;
      color: #999;
      font-family: 'Noto Sans KR', sans-serif;
    }

    #splash-screen .main-logo {
      width: 150px;
      height: auto;
      display: block;
      margin: 0 auto 5px auto;
    }

    /* Hide splash screen when not home-active */
    body:not(.home-active) #splash-screen {
      display: none;
    }

    #splash-screen h1,
    #splash-screen p {
      margin: 0;
    }

    .app-title {
      font-size: 24px;
      font-weight: bold;
      color: #333;
      font-family: 'Noto Sans KR', sans-serif;
      margin-top: 10px;
    }

    .school-name {
      font-size: 16px;
      color: #666;
      margin-top: 5px;
      font-family: 'Noto Sans KR', sans-serif;
    }
  </style>

  <!-- CSS Files -->
  <link rel="stylesheet" href="css/styles.css?v=20251229">
  <link rel="stylesheet" href="css/styles_tablet.css" media="(min-width: 601px) and (max-width: 1024px)">
  <link rel="stylesheet" href="css/styles_mobile.css" media="(max-width: 600px)">

  <script>
    // GitHub Pages: (루트) vs (서브루트 /scimanager/) 모두 대응
    (function () {
      var guessed = location.pathname.includes('/scimanager/')
        ? '/scimanager/'
        : '/';

      window.APP_BASE_PATH = guessed.replace(/\/+$/, '/'); // 끝에 / 하나로 정리
    })();
  </script>

  <!-- 초기 진입 스크립트 -->
  <script src="js/index.js?v=2" defer></script>
</head>

<body class="home-active">
  <!-- 초기 스플래시(로딩) 화면 -->
  <div id="splash-screen">
    <img src="css/logo.png" alt="SciManager Logo" class="main-logo" width="150" height="150" />

    <!-- 앱이름: APP_CONFIG.APPNAME -->
    <h1 id="app-title" class="app-title">SciManager</h1>

    <!-- 앱버전: APP_CONFIG.VERSION -->
    <p id="app-version" class="app-version" style="display: none;"></p>

    <!-- 학교 이름: APP_CONFIG.SCHOOL -->
    <p id="school-name" class="school-name">로딩 중</p>

    <!-- 저작권 문구 -->
    <div class="copyright-notice">© 2025 murmurgene. All rights reserved.</div>
  </div>

  <!-- 메인 컨텐츠 -->
  <div id="form-container"></div>

  <!-- 하단 내비게이션 -->
  <div id="navbar-container"></div>

  <!-- 플로팅 액션 버튼 -->
  <button class="fab" id="fab-button" style="display: none;"></button>

  <!-- 카메라 모달 -->
  <div id="camera-modal" class="modal-overlay" style="display: none;">
    <div class="modal-content camera-modal">
      <h3 class="modal-header">사진 촬영</h3>
      <div class="modal-body"
        style="padding: 0; display: flex; align-items: center; justify-content: center; background: #000;">
        <video id="camera-view" autoplay playsinline style="width: 100%; height: 100%; object-fit: contain;"></video>
        <canvas id="photo-canvas" style="display: none;"></canvas>
      </div>
      <div class="modal-footer" style="justify-content: center;">
        <button type="button" id="capture-btn" class="btn-primary">
          <span class="material-symbols-outlined" style="vertical-align: middle; margin-right: 5px;">camera</span> 촬영
        </button>
        <button type="button" id="cancel-camera-btn" class="btn-cancel">취소하기</button>
      </div>
    </div>
  </div>
</body>

<!-- SheetJS for Excel Export -->
<script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js"></script>
<!-- Export Utility -->
<script src="js/utils/export.js"></script>

</html>