<div class="layout-container">
    <div class="layout-header no-actions">
        <h2 id="kit-form-title" style="margin: 0; padding: 0; font-size: 20px; font-weight: 700; color: #333;">키트 등록
        </h2>
    </div>

    <div class="layout-content scroll-padding-nav">
        <form id="kit-form" autocomplete="off">
            <!-- SECTION 1: Classification & Name -->
            <h3
                style="margin: 0 0 10px; font-size: 16px; color: #00a0b2; border-bottom: 1px solid #eee; padding-bottom: 5px;">
                기본 정보
            </h3>

            <div class="form-group">
                <label>분류 (복수 선택 가능)</label>
                <div class="button-group" id="kit-class-buttons">
                    <button type="button" class="class-toggle-btn active" data-value="all">전체</button>
                    <button type="button" class="class-toggle-btn" data-value="물리학">물리학</button>
                    <button type="button" class="class-toggle-btn" data-value="화학">화학</button>
                    <button type="button" class="class-toggle-btn" data-value="생명과학">생명과학</button>
                    <button type="button" class="class-toggle-btn" data-value="지구과학">지구과학</button>
                    <button type="button" class="class-toggle-btn" data-value="융합과학">융합과학</button>
                    <button type="button" class="class-toggle-btn" data-value="기타">기타</button>
                </div>
                <!-- Hidden input to store selected value for form submission -->
                <input type="hidden" id="kit-class-value" value="all">
            </div>

            <div class="form-group" id="kit-name-group">
                <label>키트명</label>
                <select id="kit-name-select" class="form-input" disabled required>
                    <option value="" disabled selected>분류를 먼저 선택하세요</option>
                </select>

                <!-- Custom Kit Checkbox -->
                <div id="custom-kit-checkbox-wrapper" class="custom-kit-checkbox-wrapper"
                    style="margin-top: 8px; display: flex; align-items: center; gap: 8px; font-size: 13px; color: #666;">
                    <input type="checkbox" id="check-custom-kit">
                    <label for="check-custom-kit">키트 목록에 없는 새로운 키트를 등록할 경우 체크하세요.</label>
                </div>

                <!-- Custom Kit Inputs -->
                <div id="custom-kit-inputs" class="custom-kit-inputs"
                    style="display: none; margin-top: 15px; padding: 15px; background: #f9f9f9; border-radius: 8px; border: 1px solid #eee;">
                    <div class="form-group">
                        <label for="custom-kit-name">등록하려는 키트 이름</label>
                        <input type="text" id="custom-kit-name" class="form-input" placeholder="키트 이름을 입력하세요">
                    </div>

                    <div class="form-group" style="margin-top: 10px;">
                        <label>구성 약품 (CAS No.)</label>
                        <div id="cas-input-container">
                            <input type="text" class="form-input cas-input" placeholder="CAS1 (예: 7732-18-5)"
                                style="margin-bottom: 5px;">
                        </div>
                        <button type="button" id="btn-add-cas" class="btn-secondary-action"
                            style="font-size:12px; padding:4px 8px;">+ CAS 추가</button>
                        <p style="font-size: 11px; color: #888; margin-top: 5px;">* CAS 입력란이 부족할 경우 추가버튼을 누르세요.</p>
                    </div>
                </div>
            </div>

            <!-- SECTION 2: Quantity & Storage -->
            <h3
                style="margin: 30px 0 10px; font-size: 16px; color: #00a0b2; border-bottom: 1px solid #eee; padding-bottom: 5px;">
                관리 정보
            </h3>

            <div class="form-group">
                <label>수량</label>
                <input type="number" id="kit-quantity" class="form-input" value="1" min="1" required>
            </div>

            <div class="form-group">
                <label>구입일</label>
                <input type="date" id="kit-date" class="form-input" required>
            </div>

            <div class="form-group-location">
                <h3>보관 위치 설정</h3>
                <div id="kit-storage-selector"></div>
            </div>

            <!-- SECTION 3: Photo -->
            <div class="form-group">
                <label>사진</label>
                <div class="photo-container">
                    <div id="kit-photo-preview" class="photo-preview-box">
                        <img id="kit-preview-img" style="width: 100%; height: 100%; object-fit: cover; display: none;">
                        <span class="placeholder-text" style="color:#888;">사진 없음</span>
                        <video id="kit-camera-stream" autoplay playsinline
                            style="width: 100%; height: 100%; object-fit: cover; display: none;"></video>
                        <canvas id="kit-camera-canvas" style="display: none;"></canvas>
                    </div>
                    <div class="photo-buttons">
                        <button type="button" id="btn-kit-file"><span class="material-symbols-outlined">image</span>
                            파일에서 선택</button>
                        <button type="button" id="btn-kit-camera"><span
                                class="material-symbols-outlined">photo_camera</span> 카메라로 촬영</button>
                        <button type="button" id="btn-kit-confirm" style="display: none;"><span
                                class="material-symbols-outlined">check</span> 확인</button>
                        <button type="button" id="btn-cancel-camera" style="display: none;"><span
                                class="material-symbols-outlined">close</span> 취소</button>
                    </div>
                    <input type="file" id="kit-file-input" accept="image/*" style="display: none;">
                    <input type="file" id="kit-camera-input" accept="image/*" capture="environment"
                        style="display: none;">
                </div>
            </div>

            <div class="form-bottom-buttons">
                <button type="button" id="btn-cancel-kit" class="btn-cancel">취소</button>
                <button type="submit" id="btn-save-kit">저장</button>
            </div>

        </form>
    </div>
</div>