<!-- /pages/inventory-list.html -->
<div id="inventory-list-page">
  <div class="list-header">
    <h2>ì•½í’ˆ ê´€ë¦¬</h2>
    <div class="header-actions">
      <select id="sort-select" class="sort-select">
        <option value="category_name_kor">ğŸ“š ë¶„ë¥˜ë³„ ê°€ë‚˜ë‹¤</option>
        <option value="name_kor">ğŸ”  ì „ì²´ ê°€ë‚˜ë‹¤</option>
        <option value="name_eng">ğŸ”  ì „ì²´ ì˜ë¬¸ëª…</option>
        <option value="formula">ğŸ§ª í™”í•™ì‹ìˆœ</option>
        <option value="storage_location">ğŸ· ìœ„ì¹˜ìˆœ</option>
        <option value="quantity_desc">ğŸ“¦ ì¬ê³ ìˆœ</option>
        <option value="created_at_desc" selected>ğŸ•“ ë“±ë¡ìˆœ(ìµœì‹ )</option>
      </select>
      <button id="refresh-btn">â†»</button>
    </div>
  </div>

  <div id="inventory-list-container" class="list-view">
    <p id="status-message-inventory-list" style="padding:0 15px; color:#888;">
      ì•½í’ˆ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...
    </p>
  </div>
</div>

<!-- âœ… í•˜ë‹¨ ë“±ë¡ ë²„íŠ¼ (FAB) -->
<button class="fab" id="new-inventory-btn">+ ìƒˆ ì•½í’ˆ ë“±ë¡</button>

<script type="module">
  import "/js/ui/inventory.js";

  document.addEventListener("DOMContentLoaded", () => {
    console.log("ğŸ§ª inventory-list.html ë¡œë“œë¨");

    // 1ï¸âƒ£ ëª©ë¡ ë¡œë“œ
    App.Inventory?.loadList?.();

    // 2ï¸âƒ£ ìƒˆë¡œê³ ì¹¨ ë²„íŠ¼
    document.getElementById("refresh-btn")?.addEventListener("click", () => {
      App.Inventory?.loadList?.();
    });

    // 3ï¸âƒ£ ìƒˆ ì•½í’ˆ ë“±ë¡ ë²„íŠ¼
    const newBtn = document.getElementById("new-inventory-btn");
    if (newBtn) {
      newBtn.addEventListener("click", async () => {
        console.log("ğŸ§¾ ìƒˆ ì•½í’ˆ ë“±ë¡ ë²„íŠ¼ í´ë¦­ë¨");
        try {
          const ok = await App.includeHTML("pages/inventory-form.html", "form-container");
          console.log("ğŸ“„ includeHTML ê²°ê³¼:", ok);
          if (!ok) throw new Error("includeHTML ì‹¤íŒ¨");

          if (!App.Forms?.initInventoryForm) throw new Error("App.Forms.initInventoryForm ì—†ìŒ");

          console.log("ğŸ“„ inventory-form.html ë¡œë“œ ì™„ë£Œ â†’ í¼ ì´ˆê¸°í™” ì‹œì‘");
          App.Forms.initInventoryForm("create", null);
        } catch (err) {
          console.error("âŒ ìƒˆ ì•½í’ˆ ë“±ë¡ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜:", err);
        }
      });
    }
  });
</script>
